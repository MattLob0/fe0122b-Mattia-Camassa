<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <title>Document</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Cose da fare</a>
        </div>
    </nav>

    <h2 class="list">Lista</h2>
    
    
    
        <input type="text" id="testo" placeholder="Scrivi lista..">
        <button id="add" class="btn">Aggiungi</button>
        
        <ul id="lista">
            
        </ul>
    


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script>

        document.querySelector('#add').addEventListener('click', function () {

            let valore = document.querySelector('#testo').value;
            if (!valore)
                return

            let li = document.createElement('li')

            li.innerText = valore

            document.querySelector('#lista').append(li)


            document.querySelector('#testo').value = '';
            



            li.addEventListener('click', function () {
                li.remove()
                elimina(valore)
            })
            salva(valore)


        })


        function salva(testo) {


            let elementiSalvati = localStorage.getItem('lista')

            let db = elementiSalvati == null ? [] : JSON.parse(elementiSalvati)

            db.push(testo)


            localStorage.setItem('lista', JSON.stringify(db))

        }

        function creaHTML() {
            let elementiSalvati = localStorage.getItem('lista')
            let db = elementiSalvati == null ? [] : JSON.parse(elementiSalvati)

            db.forEach(function (elemento) {


                let li = document.createElement('li')
                li.innerText = elemento

                document.querySelector('#lista').append(li)

                li.addEventListener('click', function () {
                    li.remove()
                    elimina(elemento)
                })

            })

        }
        creaHTML()


        function elimina(testo) {


            let elementiSalvati = localStorage.getItem('lista')
            let db = elementiSalvati == null ? [] : JSON.parse(elementiSalvati)

            let indice = db.indexOf(elemento)

            db.splice(indice, 1)
            localStorage.setItem('lista', JSON.stringify(db))


        }

    </script>
</body>

</html>